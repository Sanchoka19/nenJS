import { Link } from 'react-router-dom';
import { useCallback, memo } from 'react';

const HomeIcon = () => (
    <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M6.94238 3.49219C6.98926 3.44531 7.05957 3.42188 7.12988 3.42188C7.17676 3.42188 7.24707 3.44531 7.29395 3.49219L11.6299 7.03125V10.875C11.6299 11.0859 11.4424 11.25 11.2549 11.25H8.60645C8.41895 11.25 8.23145 11.0859 8.23145 10.875V8.625C8.23145 8.4375 8.06738 8.25 7.85645 8.25H6.35645C6.16895 8.25 5.98145 8.4375 5.98145 8.625V10.875C5.98145 11.0859 5.81738 11.25 5.62988 11.25H3.00488C2.79395 11.25 2.62988 11.0859 2.62988 10.875V7.05469L6.94238 3.49219ZM13.7627 5.90625C13.833 5.95312 13.8799 6.04688 13.8799 6.11719C13.8799 6.1875 13.8564 6.25781 13.8096 6.30469L13.2002 7.03125C13.1533 7.10156 13.083 7.125 12.9893 7.125C12.9189 7.125 12.8486 7.10156 12.8018 7.05469L7.29395 2.53125C7.24707 2.48438 7.17676 2.46094 7.12988 2.46094C7.05957 2.46094 6.98926 2.48438 6.94238 2.53125L1.43457 7.05469C1.3877 7.10156 1.31738 7.125 1.24707 7.125C1.15332 7.125 1.08301 7.10156 1.03613 7.03125L0.426758 6.30469C0.40332 6.25781 0.356445 6.1875 0.356445 6.11719C0.356445 6.04688 0.40332 5.95312 0.473633 5.90625L6.40332 1.00781C6.59082 0.867188 6.84863 0.773438 7.12988 0.773438C7.3877 0.773438 7.64551 0.867188 7.83301 1.00781L9.94238 2.74219V1.05469C9.94238 0.890625 10.0596 0.773438 10.2236 0.773438H11.5361C11.6768 0.773438 11.8174 0.890625 11.8174 1.05469V4.28906L13.7627 5.90625Z" fill="currentColor"/>
      </svg>
  );
  
  const CalendarIcon = () => (
    <svg width="11" height="12" viewBox="0 0 11 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M0.129883 10.875V4.5H10.6299V10.875C10.6299 11.5078 10.1143 12 9.50488 12H1.25488C0.62207 12 0.129883 11.5078 0.129883 10.875ZM7.62988 6.28125V7.21875C7.62988 7.38281 7.74707 7.5 7.91113 7.5H8.84863C8.98926 7.5 9.12988 7.38281 9.12988 7.21875V6.28125C9.12988 6.14062 8.98926 6 8.84863 6H7.91113C7.74707 6 7.62988 6.14062 7.62988 6.28125ZM7.62988 9.28125V10.2188C7.62988 10.3828 7.74707 10.5 7.91113 10.5H8.84863C8.98926 10.5 9.12988 10.3828 9.12988 10.2188V9.28125C9.12988 9.14062 8.98926 9 8.84863 9H7.91113C7.74707 9 7.62988 9.14062 7.62988 9.28125ZM4.62988 6.28125V7.21875C4.62988 7.38281 4.74707 7.5 4.91113 7.5H5.84863C5.98926 7.5 6.12988 7.38281 6.12988 7.21875V6.28125C6.12988 6.14062 5.98926 6 5.84863 6H4.91113C4.74707 6 4.62988 6.14062 4.62988 6.28125ZM4.62988 9.28125V10.2188C4.62988 10.3828 4.74707 10.5 4.91113 10.5H5.84863C5.98926 10.5 6.12988 10.3828 6.12988 10.2188V9.28125C6.12988 9.14062 5.98926 9 5.84863 9H4.91113C4.74707 9 4.62988 9.14062 4.62988 9.28125ZM1.62988 6.28125V7.21875C1.62988 7.38281 1.74707 7.5 1.91113 7.5H2.84863C2.98926 7.5 3.12988 7.38281 3.12988 7.21875V6.28125C3.12988 6.14062 2.98926 6 2.84863 6H1.91113C1.74707 6 1.62988 6.14062 1.62988 6.28125ZM1.62988 9.28125V10.2188C1.62988 10.3828 1.74707 10.5 1.91113 10.5H2.84863C2.98926 10.5 3.12988 10.3828 3.12988 10.2188V9.28125C3.12988 9.14062 2.98926 9 2.84863 9H1.91113C1.74707 9 1.62988 9.14062 1.62988 9.28125ZM9.50488 1.5C10.1143 1.5 10.6299 2.01562 10.6299 2.625V3.75H0.129883V2.625C0.129883 2.01562 0.62207 1.5 1.25488 1.5H2.37988V0.375C2.37988 0.1875 2.54395 0 2.75488 0H3.50488C3.69238 0 3.87988 0.1875 3.87988 0.375V1.5H6.87988V0.375C6.87988 0.1875 7.04395 0 7.25488 0H8.00488C8.19238 0 8.37988 0.1875 8.37988 0.375V1.5H9.50488Z" fill="currentColor"/>
      </svg>
  );
  
  const ClientsIcon = () => (
    <svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M2.5 5.25C1.65625 5.25 1 4.59375 1 3.75C1 2.92969 1.65625 2.25 2.5 2.25C3.32031 2.25 4 2.92969 4 3.75C4 4.59375 3.32031 5.25 2.5 5.25ZM13 5.25C12.1562 5.25 11.5 4.59375 11.5 3.75C11.5 2.92969 12.1562 2.25 13 2.25C13.8203 2.25 14.5 2.92969 14.5 3.75C14.5 4.59375 13.8203 5.25 13 5.25ZM13.75 6C14.5703 6 15.25 6.67969 15.25 7.5V8.25C15.25 8.67188 14.8984 9 14.5 9H12.9531C12.7891 7.89844 12.1328 6.96094 11.1719 6.44531C11.4531 6.1875 11.8281 6 12.25 6H13.75ZM7.75 6C6.29688 6 5.125 4.82812 5.125 3.375C5.125 1.94531 6.29688 0.75 7.75 0.75C9.17969 0.75 10.375 1.94531 10.375 3.375C10.375 4.82812 9.17969 6 7.75 6ZM9.53125 6.75C11.0312 6.75 12.25 7.96875 12.25 9.46875V10.125C12.25 10.7578 11.7344 11.25 11.125 11.25H4.375C3.74219 11.25 3.25 10.7578 3.25 10.125V9.46875C3.25 7.96875 4.44531 6.75 5.94531 6.75H6.13281C6.625 6.98438 7.16406 7.125 7.75 7.125C8.3125 7.125 8.85156 6.98438 9.34375 6.75H9.53125ZM4.30469 6.44531C3.34375 6.96094 2.6875 7.89844 2.52344 9H1C0.578125 9 0.25 8.67188 0.25 8.25V7.5C0.25 6.67969 0.90625 6 1.75 6H3.25C3.64844 6 4.02344 6.1875 4.30469 6.44531Z" fill="currentColor"/>
      </svg>
  );
  
  const ServiceIcon = () => (
    <svg width="10" height="12" viewBox="0 0 10 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M8.625 1.5C9.23438 1.5 9.75 2.01562 9.75 2.625V10.875C9.75 11.5078 9.23438 12 8.625 12H1.875C1.24219 12 0.75 11.5078 0.75 10.875V2.625C0.75 2.01562 1.24219 1.5 1.875 1.5H3.75C3.75 0.679688 4.40625 0 5.25 0C6.07031 0 6.75 0.679688 6.75 1.5H8.625ZM3 9.9375C3.30469 9.9375 3.5625 9.70312 3.5625 9.375C3.5625 9.07031 3.30469 8.8125 3 8.8125C2.67188 8.8125 2.4375 9.07031 2.4375 9.375C2.4375 9.70312 2.67188 9.9375 3 9.9375ZM3 7.6875C3.30469 7.6875 3.5625 7.45312 3.5625 7.125C3.5625 6.82031 3.30469 6.5625 3 6.5625C2.67188 6.5625 2.4375 6.82031 2.4375 7.125C2.4375 7.45312 2.67188 7.6875 3 7.6875ZM3 5.4375C3.30469 5.4375 3.5625 5.20312 3.5625 4.875C3.5625 4.57031 3.30469 4.3125 3 4.3125C2.67188 4.3125 2.4375 4.57031 2.4375 4.875C2.4375 5.20312 2.67188 5.4375 3 5.4375ZM5.25 0.9375C4.92188 0.9375 4.6875 1.19531 4.6875 1.5C4.6875 1.82812 4.92188 2.0625 5.25 2.0625C5.55469 2.0625 5.8125 1.82812 5.8125 1.5C5.8125 1.19531 5.55469 0.9375 5.25 0.9375ZM8.25 9.5625V9.1875C8.25 9.09375 8.15625 9 8.0625 9H4.6875C4.57031 9 4.5 9.09375 4.5 9.1875V9.5625C4.5 9.67969 4.57031 9.75 4.6875 9.75H8.0625C8.15625 9.75 8.25 9.67969 8.25 9.5625ZM8.25 7.3125V6.9375C8.25 6.84375 8.15625 6.75 8.0625 6.75H4.6875C4.57031 6.75 4.5 6.84375 4.5 6.9375V7.3125C4.5 7.42969 4.57031 7.5 4.6875 7.5H8.0625C8.15625 7.5 8.25 7.42969 8.25 7.3125ZM8.25 5.0625V4.6875C8.25 4.59375 8.15625 4.5 8.0625 4.5H4.6875C4.57031 4.5 4.5 4.59375 4.5 4.6875V5.0625C4.5 5.17969 4.57031 5.25 4.6875 5.25H8.0625C8.15625 5.25 8.25 5.17969 8.25 5.0625Z" fill="currentColor"/>
      </svg>
  );

  const FinanceIcon = () => (
    <svg width="12" height="10" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M11.625 8C11.8125 8 12 8.1875 12 8.375V9.125C12 9.33594 11.8125 9.5 11.625 9.5H0.75C0.328125 9.5 0 9.17188 0 8.75V0.875C0 0.6875 0.164062 0.5 0.375 0.5H1.125C1.3125 0.5 1.5 0.6875 1.5 0.875V8H11.625ZM10.875 1.25C11.0625 1.25 11.25 1.4375 11.2266 1.625V4.41406C11.2266 4.90625 10.6406 5.16406 10.2891 4.8125L9.51562 4.03906L7.26562 6.28906C6.98438 6.59375 6.49219 6.59375 6.21094 6.28906L4.5 4.57812L3.39844 5.65625C3.25781 5.79688 3.02344 5.79688 2.88281 5.65625L2.34375 5.11719C2.20312 4.97656 2.20312 4.74219 2.34375 4.60156L3.96094 2.98438C4.24219 2.67969 4.73438 2.67969 5.01562 2.98438L6.75 4.69531L8.46094 2.98438L7.6875 2.21094C7.33594 1.85938 7.59375 1.25 8.08594 1.25H10.875Z" fill="currentColor"/>
      </svg>
  );

  const EmployIcon = () => (
    <svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M14.5469 8.76562L15.1562 9.11719C15.2266 9.14062 15.25 9.23438 15.2266 9.30469C15.0625 9.82031 14.8047 10.2656 14.4531 10.6641C14.4062 10.7109 14.3125 10.7344 14.2422 10.6875L13.6328 10.3359C13.375 10.5469 13.0938 10.7344 12.7656 10.8281V11.5312C12.7656 11.625 12.7188 11.6953 12.6484 11.6953C12.1328 11.8125 11.6172 11.8125 11.0781 11.6953C11.0078 11.6953 10.9609 11.625 10.9609 11.5312V10.8281C10.6328 10.7344 10.3516 10.5469 10.0938 10.3359L9.48438 10.6875C9.41406 10.7344 9.32031 10.7109 9.27344 10.6641C8.92188 10.2656 8.64062 9.82031 8.5 9.30469C8.47656 9.23438 8.5 9.14062 8.57031 9.11719L9.17969 8.76562C9.10938 8.4375 9.10938 8.08594 9.17969 7.75781L8.57031 7.40625C8.5 7.38281 8.47656 7.28906 8.5 7.21875C8.64062 6.70312 8.92188 6.25781 9.27344 5.85938C9.32031 5.8125 9.41406 5.78906 9.48438 5.83594L10.0938 6.1875C10.3516 5.97656 10.6328 5.78906 10.9609 5.69531V4.99219C10.9609 4.89844 11.0078 4.82812 11.0781 4.82812C11.5938 4.71094 12.1094 4.71094 12.6484 4.82812C12.7188 4.82812 12.7656 4.89844 12.7656 4.99219V5.69531C13.0938 5.78906 13.375 5.97656 13.6328 6.1875L14.2422 5.83594C14.3125 5.78906 14.4062 5.8125 14.4531 5.85938C14.8047 6.25781 15.0625 6.70312 15.2266 7.21875C15.25 7.28906 15.2266 7.38281 15.1562 7.40625L14.5469 7.75781C14.6172 8.08594 14.6172 8.4375 14.5469 8.76562ZM11.875 9.39844C12.4844 9.39844 13 8.88281 13 8.25C13 7.64062 12.4844 7.125 11.875 7.125C11.2422 7.125 10.7266 7.64062 10.7266 8.25C10.7266 8.88281 11.2422 9.39844 11.875 9.39844ZM5.5 6C3.83594 6 2.5 4.66406 2.5 3C2.5 1.35938 3.83594 0 5.5 0C7.14062 0 8.5 1.35938 8.5 3C8.5 4.66406 7.14062 6 5.5 6ZM10.2109 11.3203V11.5312C10.2109 11.625 10.2344 11.7188 10.2578 11.8125C10.0703 11.9297 9.85938 12 9.625 12H1.375C0.742188 12 0.25 11.5078 0.25 10.875V9.91406C0.25 8.17969 1.65625 6.75 3.39062 6.75H3.78906C4.30469 7.00781 4.89062 7.125 5.5 7.125C6.10938 7.125 6.67188 7.00781 7.1875 6.75H7.58594C7.67969 6.75 7.77344 6.77344 7.86719 6.79688C7.84375 6.86719 7.79688 6.91406 7.77344 6.98438C7.65625 7.40625 7.82031 7.85156 8.19531 8.0625L8.38281 8.17969C8.38281 8.22656 8.38281 8.29688 8.38281 8.34375L8.19531 8.46094C7.82031 8.67188 7.65625 9.11719 7.77344 9.53906C7.96094 10.125 8.28906 10.7109 8.73438 11.1562C8.89844 11.3438 9.15625 11.4609 9.39062 11.4609C9.55469 11.4609 9.71875 11.4141 9.85938 11.3438L10.0469 11.2266C10.0938 11.25 10.1406 11.2969 10.2109 11.3203Z" fill="currentColor"/>
      </svg>
  );
  const SettingIcon = () => (
    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M11.4141 7.40625C11.5312 7.47656 11.5781 7.61719 11.5547 7.73438C11.2734 8.57812 10.8516 9.32812 10.2656 9.96094C10.1719 10.0547 10.0312 10.0781 9.91406 10.0078L8.90625 9.44531C8.48438 9.79688 8.01562 10.0781 7.5 10.2656V11.4141C7.5 11.5312 7.40625 11.6484 7.26562 11.6953C6.44531 11.8594 5.57812 11.8828 4.71094 11.6953C4.59375 11.6484 4.5 11.5312 4.5 11.4141V10.2656C3.96094 10.0781 3.49219 9.79688 3.07031 9.44531L2.0625 10.0078C1.94531 10.0781 1.80469 10.0547 1.71094 9.96094C1.14844 9.32812 0.703125 8.57812 0.445312 7.73438C0.398438 7.61719 0.445312 7.47656 0.5625 7.40625L1.57031 6.84375C1.47656 6.28125 1.47656 5.74219 1.57031 5.17969L0.5625 4.61719C0.445312 4.54688 0.398438 4.40625 0.445312 4.28906C0.703125 3.44531 1.14844 2.69531 1.71094 2.0625C1.80469 1.96875 1.94531 1.94531 2.0625 2.01562L3.07031 2.60156C3.49219 2.22656 3.96094 1.94531 4.5 1.75781V0.609375C4.5 0.492188 4.57031 0.375 4.71094 0.351562C5.53125 0.164062 6.39844 0.140625 7.26562 0.351562C7.40625 0.375 7.5 0.492188 7.5 0.609375V1.75781C8.01562 1.94531 8.48438 2.22656 8.90625 2.57812L9.91406 2.01562C10.0312 1.94531 10.1719 1.96875 10.2656 2.0625C10.8281 2.69531 11.2734 3.44531 11.5312 4.28906C11.5781 4.40625 11.5312 4.54688 11.4141 4.61719L10.4062 5.17969C10.5234 5.74219 10.5234 6.28125 10.4062 6.84375L11.4141 7.40625ZM6 7.875C7.03125 7.875 7.875 7.05469 7.875 6C7.875 4.96875 7.03125 4.125 6 4.125C4.94531 4.125 4.125 4.96875 4.125 6C4.125 7.05469 4.94531 7.875 6 7.875Z" fill="currentColor"/>
      </svg>
  );

  const PaymentIcon = () => (
    <svg width="16" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 mr-3">
        <path d="M0.379883 10.125V6H13.8799V10.125C13.8799 10.7578 13.3643 11.25 12.7549 11.25H1.50488C0.87207 11.25 0.379883 10.7578 0.379883 10.125ZM4.87988 8.53125V9.46875C4.87988 9.63281 4.99707 9.75 5.16113 9.75H8.34863C8.48926 9.75 8.62988 9.63281 8.62988 9.46875V8.53125C8.62988 8.39062 8.48926 8.25 8.34863 8.25H5.16113C4.99707 8.25 4.87988 8.39062 4.87988 8.53125ZM1.87988 8.53125V9.46875C1.87988 9.63281 1.99707 9.75 2.16113 9.75H3.84863C3.98926 9.75 4.12988 9.63281 4.12988 9.46875V8.53125C4.12988 8.39062 3.98926 8.25 3.84863 8.25H2.16113C1.99707 8.25 1.87988 8.39062 1.87988 8.53125ZM13.8799 1.875V3H0.379883V1.875C0.379883 1.26562 0.87207 0.75 1.50488 0.75H12.7549C13.3643 0.75 13.8799 1.26562 13.8799 1.875Z" fill="currentColor"/>
      </svg>
  );

  const menuItems = [
    { icon: <HomeIcon />, text: 'მართვის პანელი', path: '/' },
    { icon: <CalendarIcon />, text: 'კალენდარი', path: '/' },
    { icon: <ClientsIcon />, text: 'კლიენტები', path: '/' },
    { icon: <ServiceIcon />, text: 'კლიენტები', path: '/' },
    { icon: <FinanceIcon />, text: 'კლიენტები', path: '/' },
    { icon: <EmployIcon />, text: 'კლიენტები', path: '/' },
    { text: 'ადმინისტრირება', className: 'pt-8 pb-4 pl-3 text-xs text-custom-grey font-semibold font-sans'},
    { icon: <SettingIcon />, text: 'კლიენტები', path: '/' },
    { icon: <PaymentIcon />, text: 'კლიენტები', path: '/' },
  ];

const MenuItem = memo(({ item, onClose }) => (
  <Link
    to={item.path}
    className={`flex items-center ${
      item.className || 
      'text-gray-600 hover:bg-gray-200 hover:bg-gray-200 transition-colors duration-200 rounded-lg p-[10px_0px_10px_15px]'
    }`}
    onClick={onClose}
  >
    {item.icon}
    {item.text}
  </Link>
));

function Sidebar({ isOpen, setIsOpen, className = '' }) {
  const handleClose = useCallback(() => {
    setIsOpen(false);
  }, [setIsOpen]);

  return (
    <>
      {/* Overlay for mobile */}
      {isOpen && (
        <div 
          className="fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"
          onClick={handleClose}
        />
      )}
      
      {/* Sidebar */}
      <aside className={`
        fixed top-0 left-0 h-screen w-64 bg-white shadow-md z-30
        ${className}
        ${isOpen ? 'translate-x-0' : '-translate-x-full'}
        lg:translate-x-0 lg:sticky lg:top-0
      `}>
        <div className="p-6 h-full flex flex-col">
          <div className="text-xl font-bold text-gray-800 mb-8">Nexaro CRM</div>
          <nav className="space-y-1 flex-grow">
            {menuItems.map((item, index) => (
              <MenuItem 
                key={index}
                item={item}
                onClose={handleClose}
              />
            ))}
          </nav>
          <div className="text-sm text-gray-500">
            &copy; 2024 Nexaro CRM
          </div>
        </div>
      </aside>
    </>
  );
}

export default memo(Sidebar); 